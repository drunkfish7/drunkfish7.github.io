<!DOCTYPE html>
<html lang="zh-CN">







<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<link rel="preconnect" href="//www.googletagmanager.com">
	<link rel="preconnect" href="//zz.bdstatic.com">
	<link rel="preconnect" href="//sp0.baidu.com">
	<link rel="preconnect" href="//www.google-analytics.com">
	<link rel="preconnect" href="//cdn1.lncld.net">
	<link rel="preconnect" href="//unpkg.com">
	<link rel="preconnect" href="//app-router.leancloud.cn">
	<link rel="preconnect" href="//9qpuwspm.api.lncld.net">
	<link rel="preconnect" href="//gravatar.loli.net">

	<title>大国特色奇异技巧系列之三：联通光猫改桥接实现外网访问 | 庄菲什</title>

	<meta name="HandheldFriendly" content="True" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
	<meta name="generator" content="hexo">
	<meta name="author" content="drunkfish">
	<meta name="description" content="">

	

	

	

	

	

	<meta property="og:site_name" content="庄菲什">
	<meta property="og:type" content="article">
	<meta property="og:title" content="大国特色奇异技巧系列之三：联通光猫改桥接实现外网访问 | 庄菲什">
	<meta property="og:description" content="">
	<meta property="og:url" content="http://yoursite.com/modem/">

	
	<meta property="article:published_time" content="2020-08-08T00:08:00+08:00"/> 
	<meta property="article:author" content="drunkfish">
	<meta property="article:published_first" content="庄菲什, /modem/" />
	

	
	
	
<link rel="stylesheet" href="/css/allinonecss.min.css">


	
	
	
<link rel="alternate" href="/atom.xml" title="庄菲什" type="application/atom+xml">
</head>
<body class="post-template">
	<div class="site-wrapper">
		




<header class="site-header post-site-header outer">
    <div class="inner">
        
<nav class="site-nav"> 
    <div class="site-nav-left">
        <ul class="nav">
            <li>
                
                <a href="/" title="Home">HOME</a>
                
            </li>
            
        </ul> 
    </div>
     
    <div class="site-nav-right">
         
        
<div class="social-links" >
    
    
    
    
    
    
    
</div>
    </div>
</nav>
    </div>
</header>


<div id="site-main" class="site-main outer" role="main">
    <div class="inner">
        <header class="post-full-header">
            <div class="post-full-meta">
                <time  class="post-full-meta-date" datetime="2020-08-08T00:00:00.000Z">
                    2020-08-8
                </time>
                
                <span class="date-divider">/</span>
                
                
            </div>
            <h1 class="post-full-title">大国特色奇异技巧系列之三：联通光猫改桥接实现外网访问</h1>
        </header>
        <div class="post-full no-image">
            
            <div class="post-full-content">
                <article id="photoswipe" class="markdown-body">
                    <p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic2@master/uPic/modem_cover.png" alt="modem_cover"></p>
<p>如果想要外网访问群晖或其他自己搭建的 Docker 等服务，比较好的方法是利用 DDNS 和端口映射，比其他方法稳定且快速，方法如下：</p>
<h2 id="光猫改桥接"><a href="#光猫改桥接" class="headerlink" title="光猫改桥接"></a>光猫改桥接</h2><p>光猫最好改成桥接模式，用路由器拨号，这样可以少一层 NAT，并且不受限于自带光猫羸弱的硬件配置和残缺的软件功能。不同光猫改桥接方法不尽相同，以小弟住的地方的光猫是中兴 F627V2，如果和小弟同款，可以参考以下步骤：</p>
<h3 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h3><p>1、确保同型号、同地区</p>
<p>小弟用的是北京联通，中兴 F627V2，外观如下：</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic2@master/uPic/modem_hardware1.png" alt="modem_hardware1"></p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic2@master/uPic/modem_hardware2.png" alt="modem_hardware2"></p>
<p>另外可以连接光猫的 WiFi 登录光猫后台查看型号：</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic2@master/uPic/modem_series.png" alt="modem_series"></p>
<p>2、备份好拨号用户名和密码</p>
<p>建议保存好拨号用户名和密码，路由器拨号时需要使用。</p>
<p>连接光猫的 WiFi（名称与密码在光猫背面），浏览器访问 <a href="http://192.168.1.1/hidden_version_switch.gch" target="_blank" rel="noopener">http://192.168.1.1/hidden_version_switch.gch</a> ，选 <code>Default version</code>，输入密码 CUAdmin，保存修改，</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic2@master/uPic/modem_switch.png" alt="modem_switch"></p>
<p>浏览器访问 <a href="http://192.168.1.1/cu.html" target="_blank" rel="noopener">http://192.168.1.1/cu.html</a> ，选择「管理员账户」，</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic2@master/uPic/modem_admin.png" alt="modem_admin"></p>
<p>输入密码 <code>CUAdmin</code> 进入，选择「基本配置」，连接名称选择 <code>2_INTERNET_B_VID_0</code>，端口绑定勾选 <code>LAN1</code>，VLAN 模式选 <code>改写(tag)</code>，VLAN ID 填写 <code>3961</code>，点击「修改」。</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic2@master/uPic/modem_config.png" alt="modem_config"></p>
<p>输完后再检查一遍，确保输入正确。</p>
<h3 id="配置路由器拨号"><a href="#配置路由器拨号" class="headerlink" title="配置路由器拨号"></a>配置路由器拨号</h3><p>不同的路由器配置拨号不完全一样，以 OpenWrt 为例：</p>
<p>在「网络」中选择「端口」，找到「WAN」口，点击「修改」，</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic2@master/uPic/modem_pppoe1.png" alt="modem_pppoe1"></p>
<p>协议选择「PPPoE」，填入拨号用户名和密码，点击「保存并应用」。</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic2@master/uPic/modem_pppoe2.png" alt="modem_pppoe2"></p>
<p>之后浏览器打开网址试试，正常打开说明配置成功。</p>
<h2 id="确保有公网-IP"><a href="#确保有公网-IP" class="headerlink" title="确保有公网 IP"></a>确保有公网 IP</h2><p>外网访问 NAS 需要公网 IP，判断是否有公网 IP 可以参照<a href="https://hsk.oray.com/news/5928.html" target="_blank" rel="noopener">这篇</a>。</p>
<p>由于 IPv4 是稀缺资源（现已耗尽），公网 IP 大部分默认没有开通。如果没有公网 IP，可以打电话给运营商的客服，一般情况会有装网师傅再联系，说明开通公网 IP 即可，注意不要说搭服务器之类的黑话（需要知道，在世界上最富裕、最发达、最文明、最开放的國家，网站是需要「备案」的）。话术可以参考以下：</p>
<blockquote>
<p>话术参考 1：我想用光猫里的端口映射功能，请问是应该怎样操作。</p>
</blockquote>
<p>（一般师傅会推荐使用光猫自带的 DMZ 功能，贴心会发一个 PDF 说明文件，之后如果没开公网 IP 师傅会帮开公网 IP ）</p>
<blockquote>
<p>话术参考 2：我想给家里的网开公网 IP。</p>
</blockquote>
<p>（不想拐弯抹角也可以直接问，有些师傅会说公网 IP 是企业用的，费用很高，这时候说是那种临时公网 IP）</p>
<h2 id="设置-DDNS"><a href="#设置-DDNS" class="headerlink" title="设置 DDNS"></a>设置 DDNS</h2><p>DDNS 即动态 DNS，方便我们的公网 IP 更换时仍可以指向我们的主机。设置 DDNS 最简单的方法是利用群晖的 DDNS（OpenWrt 也支持，比群晖稍繁琐）。</p>
<p>打开群晖控制面板，找到「外部访问」，之后添加 DDNS，最简单的是选择群晖自带的 DDNS。</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic2@master/uPic/modem_ddns2.png" alt="modem_ddns"></p>
<h2 id="配置端口映射"><a href="#配置端口映射" class="headerlink" title="配置端口映射"></a>配置端口映射</h2><p>设置好 DDNS 还需要配置端口映射，不同路由器配置方法不尽相同，大体相似，以 OpenWrt 为例：</p>
<p>在「网络」中选择「防火墙」，找到「端口转发」，添加主机、内部端口、外部端口即可。</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic2@master/uPic/modem_port.png" alt="modem_port"></p>
<p>配置好之后可以用手机蜂窝网络访问 DDNS 域名:端口号，可正常访问说明配置成功。</p>

                </article>
                <ul class="tags-postTags">
                    
                </ul>
            </div>
        </div>
    </div>

    
    <nav id="gobottom" class="pagination">
        
        <a class="prev-post" title="租房小物推荐" href="/necessary/">
            ← 租房小物推荐
        </a>
        
        <span class="prev-next-post">·</span>
        
        <a class="next-post" title="这个手机来自过去——掌阅 F1/海信 A5 使用" href="/eink/">
            这个手机来自过去——掌阅 F1/海信 A5 使用 →
        </a>
        
    </nav>

    
</div>






	</div>
	


	




<footer class="site-footer outer">
	<div class="site-footer-content inner">
		<div class="copyright">
			<a href="/" title="庄菲什">庄菲什 &copy; 2022</a>
			
				
    		
		</div>
		<nav class="site-footer-nav">
			
			<a href="https://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
			<a href="https://github.com/xzhih/hexo-theme-casper" title="Casper" target="_blank" rel="noopener">Casper</a>
		</nav>
	</div>
</footer>
	


<script>
    if(window.navigator && navigator.serviceWorker) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
            for(let registration of registrations) {
                registration.unregister()
            }
        })
    }
</script>


<script id="scriptLoad" src="/js/allinone.min.js" async></script>


<script>
    document.getElementById('scriptLoad').addEventListener('load', function () {
        
        

        
        

        
        
    })
</script>










</body>
</html>
