<!DOCTYPE html>
<html lang="zh-CN">







<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<link rel="preconnect" href="//www.googletagmanager.com">
	<link rel="preconnect" href="//zz.bdstatic.com">
	<link rel="preconnect" href="//sp0.baidu.com">
	<link rel="preconnect" href="//www.google-analytics.com">
	<link rel="preconnect" href="//cdn1.lncld.net">
	<link rel="preconnect" href="//unpkg.com">
	<link rel="preconnect" href="//app-router.leancloud.cn">
	<link rel="preconnect" href="//9qpuwspm.api.lncld.net">
	<link rel="preconnect" href="//gravatar.loli.net">

	<title>小米温度计接入 HA | 庄菲什</title>

	<meta name="HandheldFriendly" content="True" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
	<meta name="generator" content="hexo">
	<meta name="author" content="drunkfish">
	<meta name="description" content="">

	

	

	

	

	

	<meta property="og:site_name" content="庄菲什">
	<meta property="og:type" content="article">
	<meta property="og:title" content="小米温度计接入 HA | 庄菲什">
	<meta property="og:description" content="">
	<meta property="og:url" content="http://yoursite.com/ha_xiaomi_tem/">

	
	<meta property="article:published_time" content="2020-11-21T00:11:00+08:00"/> 
	<meta property="article:author" content="drunkfish">
	<meta property="article:published_first" content="庄菲什, /ha_xiaomi_tem/" />
	

	
	
	
<link rel="stylesheet" href="/css/allinonecss.min.css">


	
	
	
<link rel="alternate" href="/atom.xml" title="庄菲什" type="application/atom+xml">
</head>
<body class="post-template">
	<div class="site-wrapper">
		




<header class="site-header post-site-header outer">
    <div class="inner">
        
<nav class="site-nav"> 
    <div class="site-nav-left">
        <ul class="nav">
            <li>
                
                <a href="/" title="Home">HOME</a>
                
            </li>
            
        </ul> 
    </div>
     
    <div class="site-nav-right">
         
        
<div class="social-links" >
    
    
    
    
    
    
    
</div>
    </div>
</nav>
    </div>
</header>


<div id="site-main" class="site-main outer" role="main">
    <div class="inner">
        <header class="post-full-header">
            <div class="post-full-meta">
                <time  class="post-full-meta-date" datetime="2020-11-21T00:00:00.000Z">
                    2020-11-21
                </time>
                
                <span class="date-divider">/</span>
                
                
            </div>
            <h1 class="post-full-title">小米温度计接入 HA</h1>
        </header>
        <div class="post-full no-image">
            
            <div class="post-full-content">
                <article id="photoswipe" class="markdown-body">
                    <p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic3@master/uPic/ha_xiaomi_tem_cover.png" alt="ha_xiaomi_tem_cover"></p>
<p>小米有出好几款温度计，借助 ESPHome 和 Zigbee2MQTT，可以将其接入 Home Assistant。</p>
<h2 id="圆形-Zigbee-温度计"><a href="#圆形-Zigbee-温度计" class="headerlink" title="圆形 Zigbee 温度计"></a>圆形 Zigbee 温度计</h2><p><img src="https://www.zigbee2mqtt.io/images/devices/WSDCGQ01LM.jpg" alt="../images/devices/WSDCGQ01LM.jpg"></p>
<table>
<thead>
<tr>
<th>型号</th>
<th><a href="https://www.zigbee2mqtt.io/devices/WSDCGQ11LM.html" target="_blank" rel="noopener">WSDCGQ11LM</a>、<a href="https://www.zigbee2mqtt.io/devices/WSDCGQ12LM.html" target="_blank" rel="noopener">WSDCGQ12LM</a></th>
</tr>
</thead>
<tbody><tr>
<td>协议</td>
<td>Zigbee</td>
</tr>
</tbody></table>
<p>这个 Zigbee 圆形温度计好像是小米出的第一款温度计，可以通过 Zigbee2MQTT 快速接入，具体制作可参考小弟之前的文章。</p>
<h2 id="方形-Zigbee-温度计"><a href="#方形-Zigbee-温度计" class="headerlink" title="方形 Zigbee 温度计"></a>方形 Zigbee 温度计</h2><p><img src="https://www.zigbee2mqtt.io/images/devices/WSDCGQ11LM.jpg" alt="../images/devices/WSDCGQ11LM.jpg"></p>
<table>
<thead>
<tr>
<th>型号</th>
<th><a href="https://www.zigbee2mqtt.io/devices/WSDCGQ11LM.html" target="_blank" rel="noopener">WSDCGQ11LM</a>、<a href="https://www.zigbee2mqtt.io/devices/WSDCGQ12LM.html" target="_blank" rel="noopener">WSDCGQ12LM</a></th>
</tr>
</thead>
<tbody><tr>
<td>协议</td>
<td>Zigbee</td>
</tr>
</tbody></table>
<p>Zigbee 方形温度计可以通过 Zigbee2MQTT 接入。</p>
<h2 id="圆形-LCD-蓝牙温度计"><a href="#圆形-LCD-蓝牙温度计" class="headerlink" title="圆形 LCD 蓝牙温度计"></a>圆形 LCD 蓝牙温度计</h2><p><img src="https://esphome.io/_images/xiaomi_lywsdcgq.jpg" alt="../../_images/xiaomi_lywsdcgq.jpg"></p>
<table>
<thead>
<tr>
<th>型号</th>
<th>LYWSDCGQ</th>
</tr>
</thead>
<tbody><tr>
<td>协议</td>
<td>蓝牙</td>
</tr>
</tbody></table>
<p>这款温度计是蓝牙协议，圓形，分段 LCD 显示，可廣播溫度、濕度和電池電量，可通过 ESPHome 接入（参考小弟之前的文章），</p>
<p>配置示例：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sensor:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">platform:</span> <span class="string">xiaomi_lywsdcgq</span></span><br><span class="line">    <span class="attr">mac_address:</span> <span class="string">"7A:80:8E:19:36:BA"</span></span><br><span class="line">    <span class="attr">temperature:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"LYWSDCGQ Temperature"</span></span><br><span class="line">    <span class="attr">humidity:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"LYWSDCGQ Humidity"</span></span><br><span class="line">    <span class="attr">battery_level:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"LYWSDCGQ Battery Level"</span></span><br></pre></td></tr></table></figure>

<h2 id="长方形-E-Ink-蓝牙温度计"><a href="#长方形-E-Ink-蓝牙温度计" class="headerlink" title="长方形 E-Ink 蓝牙温度计"></a>长方形 E-Ink 蓝牙温度计</h2><p><img src="https://esphome.io/_images/xiaomi_lywsd02.jpg" alt="../../_images/xiaomi_lywsd02.jpg"></p>
<table>
<thead>
<tr>
<th>型号</th>
<th>LYWSD02</th>
</tr>
</thead>
<tbody><tr>
<td>协议</td>
<td>蓝牙</td>
</tr>
</tbody></table>
<p>长方形 E-Ink 蓝牙温度计有電子墨水顯示屏，可廣播溫度和濕度值，無電池狀態。可通过 ESPHome 接入，</p>
<p>配置示例：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sensor:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">platform:</span> <span class="string">xiaomi_lywsd02</span></span><br><span class="line">    <span class="attr">mac_address:</span> <span class="string">"3F:5B:7D:82:58:4E"</span></span><br><span class="line">    <span class="attr">temperature:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"LYWSD02 Temperature"</span></span><br><span class="line">    <span class="attr">humidity:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"LYWSD02 Humidity"</span></span><br></pre></td></tr></table></figure>



<h2 id="圆形-E-Ink-蓝牙温度计"><a href="#圆形-E-Ink-蓝牙温度计" class="headerlink" title="圆形 E-Ink 蓝牙温度计"></a>圆形 E-Ink 蓝牙温度计</h2><p><img src="https://esphome.io/_images/xiaomi_cgg1.jpg" alt="../../_images/xiaomi_cgg1.jpg"></p>
<table>
<thead>
<tr>
<th>型号</th>
<th>CGG1</th>
</tr>
</thead>
<tbody><tr>
<td>协议</td>
<td>蓝牙</td>
</tr>
</tbody></table>
<p>圆形 E-Ink 蓝牙温度计带電子墨水顯示屏，可通过 ESPHome 接入，</p>
<p>配置示例：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sensor:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">platform:</span> <span class="string">xiaomi_cgg1</span></span><br><span class="line">    <span class="attr">mac_address:</span> <span class="string">"7A:80:8E:19:36:BA"</span></span><br><span class="line">    <span class="attr">temperature:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"CGG1 Temperature"</span></span><br><span class="line">    <span class="attr">humidity:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"CGG1 Humidity"</span></span><br><span class="line">    <span class="attr">battery_level:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"CGG1 Battery Level"</span></span><br></pre></td></tr></table></figure>



<h2 id="方形-LCD-蓝牙小温度计"><a href="#方形-LCD-蓝牙小温度计" class="headerlink" title="方形 LCD 蓝牙小温度计"></a>方形 LCD 蓝牙小温度计</h2><p><img src="https://esphome.io/_images/xiaomi_lywsd03mmc.jpg" alt="../../_images/xiaomi_lywsd03mmc.jpg"></p>
<table>
<thead>
<tr>
<th>型号</th>
<th>LYWSD03MMC</th>
</tr>
</thead>
<tbody><tr>
<td>协议</td>
<td>蓝牙</td>
</tr>
</tbody></table>
<p>这款温度计体积很小，方形，分段 LCD 显示，蓝牙协议（已加密），可廣播溫度、濕度和電池電量，需要先可获取 bindkey 再通过 ESPHome 接入。</p>
<p>有大大写了<a href="https://github.com/atc1441/ATC_MiThermometer" target="_blank" rel="noopener">很赞的网页版程序</a>可以快速获取到 bindkey，步骤如下：</p>
<p>在浏览器（推荐电脑版 Chrome）打开网页 <a href="https://atc1441.github.io/TelinkFlasher.html" target="_blank" rel="noopener">https://atc1441.github.io/TelinkFlasher.html</a> ，点击「connect」可以看到蓝牙设备列表，选中名称叫做「LYWSD03MMC」的设备并配对，若有多个，建议关闭其他，一个一个获取，</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic3@master/uPic/ha_xiaomi_tem1.png" alt="ha_xiaomi_tem1"></p>
<p>配对后即可获取到 bindkey，记下备用。</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic3@master/uPic/ha_xiaomi_tem2.png" alt="ha_xiaomi_tem2"></p>
<p>在电脑连接的蓝牙设备中可以获取到温度计的 MAC 地址。</p>
<p>之后通过 ESPHome 可接入 Home Assistant，配置示例：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sensor:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">platform:</span> <span class="string">xiaomi_lywsd03mmc</span></span><br><span class="line">    <span class="attr">mac_address:</span> <span class="string">"A4:C1:38:B1:CD:7F"</span></span><br><span class="line">    <span class="attr">bindkey:</span> <span class="string">"eef418daf699a0c188f3bfd17e4565d9"</span></span><br><span class="line">    <span class="attr">temperature:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"LYWSD03MMC Temperature"</span></span><br><span class="line">    <span class="attr">humidity:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"LYWSD03MMC Humidity"</span></span><br><span class="line">    <span class="attr">battery_level:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"LYWSD03MMC Battery Level"</span></span><br></pre></td></tr></table></figure>

                </article>
                <ul class="tags-postTags">
                    
                    <li>
                        <a href="/tags/Home-Assistant/" rel="tag"># Home Assistant</a>
                    </li>
                    
                </ul>
            </div>
        </div>
    </div>

    
    <nav id="gobottom" class="pagination">
        
        <a class="prev-post" title="窗帘快速接入 HA——免去换轨 超快接入" href="/ha_curtain/">
            ← 窗帘快速接入 HA——免去换轨 超快接入
        </a>
        
        <span class="prev-next-post">·</span>
        
        <a class="next-post" title="Google Home 作报时钟" href="/ha_clock/">
            Google Home 作报时钟 →
        </a>
        
    </nav>

    
</div>






	</div>
	


	




<footer class="site-footer outer">
	<div class="site-footer-content inner">
		<div class="copyright">
			<a href="/" title="庄菲什">庄菲什 &copy; 2022</a>
			
				
    		
		</div>
		<nav class="site-footer-nav">
			
			<a href="https://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
			<a href="https://github.com/xzhih/hexo-theme-casper" title="Casper" target="_blank" rel="noopener">Casper</a>
		</nav>
	</div>
</footer>
	


<script>
    if(window.navigator && navigator.serviceWorker) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
            for(let registration of registrations) {
                registration.unregister()
            }
        })
    }
</script>


<script id="scriptLoad" src="/js/allinone.min.js" async></script>


<script>
    document.getElementById('scriptLoad').addEventListener('load', function () {
        
        

        
        

        
        
    })
</script>










</body>
</html>
