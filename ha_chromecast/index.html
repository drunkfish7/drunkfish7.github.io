<!DOCTYPE html>
<html lang="zh-CN">







<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<link rel="preconnect" href="//www.googletagmanager.com">
	<link rel="preconnect" href="//zz.bdstatic.com">
	<link rel="preconnect" href="//sp0.baidu.com">
	<link rel="preconnect" href="//www.google-analytics.com">
	<link rel="preconnect" href="//cdn1.lncld.net">
	<link rel="preconnect" href="//unpkg.com">
	<link rel="preconnect" href="//app-router.leancloud.cn">
	<link rel="preconnect" href="//9qpuwspm.api.lncld.net">
	<link rel="preconnect" href="//gravatar.loli.net">

	<title>Chromecast 设备接入 HA | 庄菲什</title>

	<meta name="HandheldFriendly" content="True" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
	<meta name="generator" content="hexo">
	<meta name="author" content="drunkfish">
	<meta name="description" content="">

	

	

	

	

	

	<meta property="og:site_name" content="庄菲什">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Chromecast 设备接入 HA | 庄菲什">
	<meta property="og:description" content="">
	<meta property="og:url" content="http://yoursite.com/ha_chromecast/">

	
	<meta property="article:published_time" content="2020-11-14T00:11:00+08:00"/> 
	<meta property="article:author" content="drunkfish">
	<meta property="article:published_first" content="庄菲什, /ha_chromecast/" />
	

	
	
	
<link rel="stylesheet" href="/css/allinonecss.min.css">


	
	
	
<link rel="alternate" href="/atom.xml" title="庄菲什" type="application/atom+xml">
</head>
<body class="post-template">
	<div class="site-wrapper">
		




<header class="site-header post-site-header outer">
    <div class="inner">
        
<nav class="site-nav"> 
    <div class="site-nav-left">
        <ul class="nav">
            <li>
                
                <a href="/" title="Home">HOME</a>
                
            </li>
            
        </ul> 
    </div>
     
    <div class="site-nav-right">
         
        
<div class="social-links" >
    
    
    
    
    
    
    
</div>
    </div>
</nav>
    </div>
</header>


<div id="site-main" class="site-main outer" role="main">
    <div class="inner">
        <header class="post-full-header">
            <div class="post-full-meta">
                <time  class="post-full-meta-date" datetime="2020-11-14T00:00:00.000Z">
                    2020-11-14
                </time>
                
                <span class="date-divider">/</span>
                
                
            </div>
            <h1 class="post-full-title">Chromecast 设备接入 HA</h1>
        </header>
        <div class="post-full no-image">
            
            <div class="post-full-content">
                <article id="photoswipe" class="markdown-body">
                    <p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic3@master/uPic/ha_chromecast_cover.png" alt="ha_chromecast_cover"></p>
<p>Home Assistant 可以自动发现 Chromecast 设备，进行相关配置可以解锁更多玩法。</p>
<h2 id="Chromecast-音频"><a href="#Chromecast-音频" class="headerlink" title="Chromecast 音频"></a>Chromecast 音频</h2><p>Chromecast 音频包括 Google Home、Google Home mini、Google Nest Mini、Google Audio。</p>
<h3 id="充当-AirPlay-设备"><a href="#充当-AirPlay-设备" class="headerlink" title="充当 AirPlay 设备"></a>充当 AirPlay 设备</h3><p>若安装的是 HASS 可以在 Add-on Store 中查找安装插件 <code>AirCast</code>，安装后不需配置，Google Home就可以当做一个 AirPlay 设备使用了。</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic3@master/uPic/ha_chromecast_aircast.png" alt="ha_chromecast_aircast"></p>
<h3 id="TTS"><a href="#TTS" class="headerlink" title="TTS"></a>TTS</h3><p>Google Home 支持 TTS，配置 SSL 证书后会出现无法播放的情况，有大大贴出<a href="https://community.home-assistant.io/t/tts-with-ssl-on/207875/3" target="_blank" rel="noopener">解决方法</a>，比较简单的办法是在 <code>tts</code> 组件下添加一个 <code>base_url</code>，地址是配置了 SSL 证书的Home Assistant 访问地址。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">platform:</span> <span class="string">google_translate</span></span><br><span class="line">    <span class="attr">base_url:</span> <span class="string">https://&lt;Home</span> <span class="string">Assistant</span> <span class="string">URL&gt;:8123</span></span><br></pre></td></tr></table></figure>

<h3 id="播放音频文件"><a href="#播放音频文件" class="headerlink" title="播放音频文件"></a>播放音频文件</h3><p>同样音频文件在配置 SSL 证书后也会出现无法播放，小弟的解决办法是通过 <a href="https://github.com/helloxz/zdir" target="_blank" rel="noopener">zdir</a> 这个小工具将音频文件转成外链。</p>
<h2 id="Android-TV"><a href="#Android-TV" class="headerlink" title="Android TV"></a>Android TV</h2><p>Android TV 在 Home Assistant 也可以自动发现，配置 ADB 有更多的控制选项。</p>
<p>首先在 Android TV 在手机「设置」→「关于」→「Build」中连按 7 次，打开「开发者选项」，</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic3@master/uPic/ha_chromecast_adb.png" alt="ha_chromecast_adb"></p>
<p>在 Add-on Store 中查找安装插件 <code>ADB - Android Debug Bridge</code>，并配置 Android TV 地址，</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devices:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;Android</span> <span class="string">TV</span> <span class="string">IP</span> <span class="string">Address&gt;</span></span><br><span class="line"><span class="attr">reconnect_timeout:</span> <span class="number">90</span></span><br></pre></td></tr></table></figure>

<p>在 <code>configuration.yaml</code> 文件中添加配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">media_player:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">platform:</span> <span class="string">androidtv</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Android</span> <span class="string">TV</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">&lt;Android</span> <span class="string">TV</span> <span class="string">IP</span> <span class="string">Address&gt;</span></span><br><span class="line">    <span class="attr">adb_server_ip:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">    <span class="attr">adb_server_port:</span> <span class="number">5037</span></span><br></pre></td></tr></table></figure>

<p>配置好之后重启 Home Assistant，首次连接到设备时，Android TV 上将出现一个对话框，要求批准连接。选中「始终允许来自此设备的连接」复选框，之后点击「确定」。</p>
<p>在前端 UI 添加媒体播放器即可看到新配置的 Android TV，组件可以看到屏幕缩略图，点开可以控制音量、上一首、下一首等等，也可以直接打开某一个应用。</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic3@master/uPic/ha_chromecast_tv.png" alt="ha_chromecast_tv"></p>

                </article>
                <ul class="tags-postTags">
                    
                    <li>
                        <a href="/tags/Home-Assistant/" rel="tag"># Home Assistant</a>
                    </li>
                    
                </ul>
            </div>
        </div>
    </div>

    
    <nav id="gobottom" class="pagination">
        
        <a class="prev-post" title="Google Home 作报时钟" href="/ha_clock/">
            ← Google Home 作报时钟
        </a>
        
        <span class="prev-next-post">·</span>
        
        <a class="next-post" title="空调快速接入 HA" href="/ha_ac/">
            空调快速接入 HA →
        </a>
        
    </nav>

    
</div>






	</div>
	


	




<footer class="site-footer outer">
	<div class="site-footer-content inner">
		<div class="copyright">
			<a href="/" title="庄菲什">庄菲什 &copy; 2022</a>
			
				
    		
		</div>
		<nav class="site-footer-nav">
			
			<a href="https://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
			<a href="https://github.com/xzhih/hexo-theme-casper" title="Casper" target="_blank" rel="noopener">Casper</a>
		</nav>
	</div>
</footer>
	


<script>
    if(window.navigator && navigator.serviceWorker) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
            for(let registration of registrations) {
                registration.unregister()
            }
        })
    }
</script>


<script id="scriptLoad" src="/js/allinone.min.js" async></script>


<script>
    document.getElementById('scriptLoad').addEventListener('load', function () {
        
        

        
        

        
        
    })
</script>










</body>
</html>
