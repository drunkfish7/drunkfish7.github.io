<!DOCTYPE html>
<html lang="zh-CN">







<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<link rel="preconnect" href="//www.googletagmanager.com">
	<link rel="preconnect" href="//zz.bdstatic.com">
	<link rel="preconnect" href="//sp0.baidu.com">
	<link rel="preconnect" href="//www.google-analytics.com">
	<link rel="preconnect" href="//cdn1.lncld.net">
	<link rel="preconnect" href="//unpkg.com">
	<link rel="preconnect" href="//app-router.leancloud.cn">
	<link rel="preconnect" href="//9qpuwspm.api.lncld.net">
	<link rel="preconnect" href="//gravatar.loli.net">

	<title>搭建 V2ray 连接互联网 | 庄菲什</title>

	<meta name="HandheldFriendly" content="True" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
	<meta name="generator" content="hexo">
	<meta name="author" content="drunkfish">
	<meta name="description" content="">

	

	

	

	

	

	<meta property="og:site_name" content="庄菲什">
	<meta property="og:type" content="article">
	<meta property="og:title" content="搭建 V2ray 连接互联网 | 庄菲什">
	<meta property="og:description" content="">
	<meta property="og:url" content="http://yoursite.com/gfw/">

	
	<meta property="article:published_time" content="2020-01-18T00:01:00+08:00"/> 
	<meta property="article:author" content="drunkfish">
	<meta property="article:published_first" content="庄菲什, /gfw/" />
	

	
	
	
<link rel="stylesheet" href="/css/allinonecss.min.css">


	
	
	
<link rel="alternate" href="/atom.xml" title="庄菲什" type="application/atom+xml">
</head>
<body class="post-template">
	<div class="site-wrapper">
		




<header class="site-header post-site-header outer">
    <div class="inner">
        
<nav class="site-nav"> 
    <div class="site-nav-left">
        <ul class="nav">
            <li>
                
                <a href="/" title="Home">HOME</a>
                
            </li>
            
        </ul> 
    </div>
     
    <div class="site-nav-right">
         
        
<div class="social-links" >
    
    
    
    
    
    
    
</div>
    </div>
</nav>
    </div>
</header>


<div id="site-main" class="site-main outer" role="main">
    <div class="inner">
        <header class="post-full-header">
            <div class="post-full-meta">
                <time  class="post-full-meta-date" datetime="2020-01-18T00:00:00.000Z">
                    2020-01-18
                </time>
                
                <span class="date-divider">/</span>
                
                
            </div>
            <h1 class="post-full-title">搭建 V2ray 连接互联网</h1>
        </header>
        <div class="post-full no-image">
            
            <div class="post-full-content">
                <article id="photoswipe" class="markdown-body">
                    <p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic2@master/uPic/gfw_cover2.png" alt="gfw_cover2"></p>
<p>1999 年 4 月，亚洲东部一个国家北方的某个城市发生仅次于十年前的大规模民众集体上坊事件，当局事情发生之后才知道那些民众是通过网络集合起来的。而早在 1998 年 9 月，公安就在酝酿开展类似网络管制的「金盾工程」，因为这次的事件这个工程进度大大加快，至 2000 年 5 月，代号 005 的工程开始实施。从此，古老的东方国家建立起天下第一、独步全球的超级防火长城。</p>
<p>2011 年，知乎员工 clowwindy 将自己自用了一年多的小工具 Shadowsocks 贴在一个技术论坛上， Shadowsocks 部署简单，对服务器配置要求低，可以自动区分境内境外流量，不易被识别，很快成为最流行的破墙方式。多年滞销的 VPS 开始畅销，有些人开始学习 Linux 命令行，有些人开发出管理面板，嗅到商机的人购买服务器做起 「机场」的生意。</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic@master/uPic/gfw0.png" alt="gfw0"></p>
<p>Shadowsocks 的繁荣引起当局注意，击破作者及各类衍生工具的作者后，Shadowsocks 渐渐停止了更新。</p>
<p>「有一种鸟儿是永远也关不住的，因为它们的每片羽毛都闪着自由的光辉。」热爱自由的伟大程序员又开发了其他工具，如 V2ray、Brook、Trojan 等等，其中目前稳定且生态完整的是 <a href="https://www.v2ray.com" target="_blank" rel="noopener">V2ray</a>。</p>
<p>这篇文章主要是搭建 V2ray 的过程，目前相对不会被封的方法是 Nginx+Websocket+TLS     的方式，将流量伪装成访问某一个 IP 地址。</p>
<h2 id="搭建"><a href="#搭建" class="headerlink" title="搭建"></a>搭建</h2><h3 id="建立-VM-实例"><a href="#建立-VM-实例" class="headerlink" title="建立 VM 实例"></a>建立 VM 实例</h3><p>首先申请好谷歌云，或者用其他 VPS，并建立好 VM 实例、建立防火墙入站规则。具体过程可以参见之前小弟的<a href="https://drunkfish.me/gcp" target="_blank" rel="noopener">这篇</a>。</p>
<p>在建立实例前可以通过<a href="http://www.gcping.com/" target="_blank" rel="noopener">这个</a>或<a href="https://www.feitsui.com/zh-hans/cloud/gcp" target="_blank" rel="noopener">这个</a>网站初步测速选择国家。待建立 VM 实例后，可以用终端机输入命令 <code>ping 服务器 IP</code>，如果延时高可以重新选择。</p>
<h3 id="申请域名"><a href="#申请域名" class="headerlink" title="申请域名"></a>申请域名</h3><p>搭建 V2ray 伪装流量需要绑定域名，付费、免费域名都可以，免费域名申请可以参见之前小弟的<a href="https://drunkfish.me/domain/" target="_blank" rel="noopener">这篇</a>。同时，域名的某个主机名（如 <a href="http://www.drunkfish.ml" target="_blank" rel="noopener">www.drunkfish.ml</a> 解析到服务器的 IP，比如可以添加一条 www 的 A 记录。</p>
<h3 id="一键脚本安装"><a href="#一键脚本安装" class="headerlink" title="一键脚本安装"></a>一键脚本安装</h3><p>安装 V2ray 最简单的办法是使用一键脚本。目前<a href="https://github.com/hijkpw/scripts" target="_blank" rel="noopener">这个大大写的脚本</a>还在更新（包括 V2ray 加密脚本、V2ray 伪装脚本等等，作者的网站在<a href="https://www.hijk.pw/" target="_blank" rel="noopener">这里</a>）。下面以 Desbian 系统安装带伪装 V2Ray为例：</p>
<p>SSH 连接实例，获取 root 权限，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br></pre></td></tr></table></figure>

<p>之后输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;hijkpw&#x2F;scripts&#x2F;master&#x2F;ubuntu_install_v2ray2.sh)</span><br></pre></td></tr></table></figure>

<p>待屏幕出现「确认满足按y，按其他退出脚本」，按 <code>y</code>，回车，输入域名的主机名（如 <a href="http://www.drunkfish.ml）、伪装路径（如`/drunkfish`），另外建议选择安装" target="_blank" rel="noopener">www.drunkfish.ml）、伪装路径（如`/drunkfish`），另外建议选择安装</a> BBR 加速（脚本已内置）。</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic@master/uPic/gfw1.png" alt="gfw1"></p>
<p>安装成功会显示配置信息，复制保存，之后重启实例。</p>
<p><img src="https://cdn.jsdelivr.net/gh/drunkfish7/pic@master/uPic/gfw2.png" alt="gfw2"></p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><p>在设备上安装 V2Ray 客户端，添加节点，填入相应信息就可以流畅地访问互联网。</p>
<h2 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h2><p>iOS 上可用的 V2ray 客户端有 <a href="https://itunes.apple.com/us/app/id932747118" target="_blank" rel="noopener">Shadowrocket</a>、<a href="https://apps.apple.com/us/app/id1252015438" target="_blank" rel="noopener">Quantumult</a>。</p>
<p>注意：这几款应用在中国区 App Store 已下架，请注册非中国区（如美区）Apple ID，美区 Apple ID 不支持中国信用卡付款，可以用苹果礼品卡充值（$10 起充，参见<a href="https://blog.shuziyimin.org/636" target="_blank" rel="noopener">这篇</a>），或者绑定美区 PayPal（推荐，美区 PayPal 可以绑定中国外币信用卡，参见<a href="https://blog.shuziyimin.org/171" target="_blank" rel="noopener">这篇</a>）。</p>
<h2 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h2><p>macOS 推荐使用 <a href="https://github.com/yichengchen/clashX" target="_blank" rel="noopener">ClashX</a>、<a href="https://github.com/yanue/V2rayU" target="_blank" rel="noopener">V2rayU</a>。ClashX 需编辑配置文件，配置文件参见<a href="https://github.com/Hackl0us/SS-Rule-Snippet/blob/master/LAZY_RULES/clash.yaml" target="_blank" rel="noopener">这里</a>。</p>
<h2 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h2><p>Android 可以使用 <a href="https://play.google.com/store/apps/details?id=fun.kitsunebi.kitsunebi4android" target="_blank" rel="noopener">Kitsunebi</a>。</p>
<h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><p>Windows 上可以使用 <a href="https://github.com/Cenmrev/V2RayW" target="_blank" rel="noopener">V2RayW</a>。</p>
<h2 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h2><p>硬路由可以使用 V2ray 的固件有梅林改版、老毛子 Padavan、OpenWrt 等等，软路由可以使用 OpenWrt。</p>

                </article>
                <ul class="tags-postTags">
                    
                </ul>
            </div>
        </div>
    </div>

    
    <nav id="gobottom" class="pagination">
        
        <a class="prev-post" title="DIY 超酷的像素钟" href="/awtrix/">
            ← DIY 超酷的像素钟
        </a>
        
        <span class="prev-next-post">·</span>
        
        <a class="next-post" title="Freenom 申请免费域名" href="/domain/">
            Freenom 申请免费域名 →
        </a>
        
    </nav>

    
</div>






	</div>
	


	




<footer class="site-footer outer">
	<div class="site-footer-content inner">
		<div class="copyright">
			<a href="/" title="庄菲什">庄菲什 &copy; 2022</a>
			
				
    		
		</div>
		<nav class="site-footer-nav">
			
			<a href="https://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
			<a href="https://github.com/xzhih/hexo-theme-casper" title="Casper" target="_blank" rel="noopener">Casper</a>
		</nav>
	</div>
</footer>
	


<script>
    if(window.navigator && navigator.serviceWorker) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
            for(let registration of registrations) {
                registration.unregister()
            }
        })
    }
</script>


<script id="scriptLoad" src="/js/allinone.min.js" async></script>


<script>
    document.getElementById('scriptLoad').addEventListener('load', function () {
        
        

        
        

        
        
    })
</script>










</body>
</html>
